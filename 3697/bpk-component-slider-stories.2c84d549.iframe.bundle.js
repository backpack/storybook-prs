(self.webpackChunkbackpack=self.webpackChunkbackpack||[]).push([[4968],{"./examples/bpk-component-slider/stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{RangeSlider:()=>RangeSlider,RangeSliderWithMinimumDistance:()=>RangeSliderWithMinimumDistance,SimpleSlider:()=>SimpleSlider,SimpleSliderWithSteps:()=>SimpleSliderWithSteps,TimeSlider:()=>TimeSlider,VisualTest:()=>VisualTest,VisualTestWithZoom:()=>VisualTestWithZoom,default:()=>stories});var dist=__webpack_require__("./node_modules/@storybook/addon-docs/dist/index.mjs"),blocks_dist=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs"),react=__webpack_require__("./node_modules/react/index.js");function setRef(ref,value){if("function"==typeof ref)return ref(value);null!=ref&&(ref.current=value)}function composeRefs(...refs){return node=>{let hasCleanup=!1;const cleanups=refs.map((ref=>{const cleanup=setRef(ref,node);return hasCleanup||"function"!=typeof cleanup||(hasCleanup=!0),cleanup}));if(hasCleanup)return()=>{for(let i=0;i<cleanups.length;i++){const cleanup=cleanups[i];"function"==typeof cleanup?cleanup():setRef(refs[i],null)}}}}function useComposedRefs(...refs){return react.useCallback(composeRefs(...refs),refs)}function clamp(value,[min,max]){return Math.min(max,Math.max(min,value))}function composeEventHandlers(originalEventHandler,ourEventHandler,{checkForDefaultPrevented=!0}={}){return function handleEvent(event){if(originalEventHandler?.(event),!1===checkForDefaultPrevented||!event.defaultPrevented)return ourEventHandler?.(event)}}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function createContextScope(scopeName,createContextScopeDeps=[]){let defaultContexts=[];const createScope=()=>{const scopeContexts=defaultContexts.map((defaultContext=>react.createContext(defaultContext)));return function useScope(scope){const contexts=scope?.[scopeName]||scopeContexts;return react.useMemo((()=>({[`__scope${scopeName}`]:{...scope,[scopeName]:contexts}})),[scope,contexts])}};return createScope.scopeName=scopeName,[function createContext3(rootComponentName,defaultContext){const BaseContext=react.createContext(defaultContext),index=defaultContexts.length;defaultContexts=[...defaultContexts,defaultContext];const Provider=props=>{const{scope,children,...context}=props,Context=scope?.[scopeName]?.[index]||BaseContext,value=react.useMemo((()=>context),Object.values(context));return(0,jsx_runtime.jsx)(Context.Provider,{value,children})};return Provider.displayName=rootComponentName+"Provider",[Provider,function useContext2(consumerName,scope){const Context=scope?.[scopeName]?.[index]||BaseContext,context=react.useContext(Context);if(context)return context;if(void 0!==defaultContext)return defaultContext;throw new Error(`\`${consumerName}\` must be used within \`${rootComponentName}\``)}]},composeContextScopes(createScope,...createContextScopeDeps)]}function composeContextScopes(...scopes){const baseScope=scopes[0];if(1===scopes.length)return baseScope;const createScope=()=>{const scopeHooks=scopes.map((createScope2=>({useScope:createScope2(),scopeName:createScope2.scopeName})));return function useComposedScopes(overrideScopes){const nextScopes=scopeHooks.reduce(((nextScopes2,{useScope,scopeName})=>({...nextScopes2,...useScope(overrideScopes)[`__scope${scopeName}`]})),{});return react.useMemo((()=>({[`__scope${baseScope.scopeName}`]:nextScopes})),[nextScopes])}};return createScope.scopeName=baseScope.scopeName,createScope}function useCallbackRef(callback){const callbackRef=react.useRef(callback);return react.useEffect((()=>{callbackRef.current=callback})),react.useMemo((()=>(...args)=>callbackRef.current?.(...args)),[])}function useControllableState({prop,defaultProp,onChange=()=>{}}){const[uncontrolledProp,setUncontrolledProp]=function useUncontrolledState({defaultProp,onChange}){const uncontrolledState=react.useState(defaultProp),[value]=uncontrolledState,prevValueRef=react.useRef(value),handleChange=useCallbackRef(onChange);return react.useEffect((()=>{prevValueRef.current!==value&&(handleChange(value),prevValueRef.current=value)}),[value,prevValueRef,handleChange]),uncontrolledState}({defaultProp,onChange}),isControlled=void 0!==prop,value=isControlled?prop:uncontrolledProp,handleChange=useCallbackRef(onChange);return[value,react.useCallback((nextValue=>{if(isControlled){const value2="function"==typeof nextValue?nextValue(prop):nextValue;value2!==prop&&handleChange(value2)}else setUncontrolledProp(nextValue)}),[isControlled,prop,setUncontrolledProp,handleChange])]}var DirectionContext=react.createContext(void 0);var useLayoutEffect2=Boolean(globalThis?.document)?react.useLayoutEffect:()=>{};__webpack_require__("./node_modules/react-dom/index.js");var Slot=react.forwardRef(((props,forwardedRef)=>{const{children,...slotProps}=props,childrenArray=react.Children.toArray(children),slottable=childrenArray.find(isSlottable);if(slottable){const newElement=slottable.props.children,newChildren=childrenArray.map((child=>child===slottable?react.Children.count(newElement)>1?react.Children.only(null):react.isValidElement(newElement)?newElement.props.children:null:child));return(0,jsx_runtime.jsx)(SlotClone,{...slotProps,ref:forwardedRef,children:react.isValidElement(newElement)?react.cloneElement(newElement,void 0,newChildren):null})}return(0,jsx_runtime.jsx)(SlotClone,{...slotProps,ref:forwardedRef,children})}));Slot.displayName="Slot";var SlotClone=react.forwardRef(((props,forwardedRef)=>{const{children,...slotProps}=props;if(react.isValidElement(children)){const childrenRef=function getElementRef(element){let getter=Object.getOwnPropertyDescriptor(element.props,"ref")?.get,mayWarn=getter&&"isReactWarning"in getter&&getter.isReactWarning;if(mayWarn)return element.ref;if(getter=Object.getOwnPropertyDescriptor(element,"ref")?.get,mayWarn=getter&&"isReactWarning"in getter&&getter.isReactWarning,mayWarn)return element.props.ref;return element.props.ref||element.ref}(children);return react.cloneElement(children,{...mergeProps(slotProps,children.props),ref:forwardedRef?composeRefs(forwardedRef,childrenRef):childrenRef})}return react.Children.count(children)>1?react.Children.only(null):null}));SlotClone.displayName="SlotClone";var Slottable=({children})=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children});function isSlottable(child){return react.isValidElement(child)&&child.type===Slottable}function mergeProps(slotProps,childProps){const overrideProps={...childProps};for(const propName in childProps){const slotPropValue=slotProps[propName],childPropValue=childProps[propName];/^on[A-Z]/.test(propName)?slotPropValue&&childPropValue?overrideProps[propName]=(...args)=>{childPropValue(...args),slotPropValue(...args)}:slotPropValue&&(overrideProps[propName]=slotPropValue):"style"===propName?overrideProps[propName]={...slotPropValue,...childPropValue}:"className"===propName&&(overrideProps[propName]=[slotPropValue,childPropValue].filter(Boolean).join(" "))}return{...slotProps,...overrideProps}}var Primitive=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((primitive,node)=>{const Node=react.forwardRef(((props,forwardedRef)=>{const{asChild,...primitiveProps}=props,Comp=asChild?Slot:node;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,jsx_runtime.jsx)(Comp,{...primitiveProps,ref:forwardedRef})}));return Node.displayName=`Primitive.${node}`,{...primitive,[node]:Node}}),{});var PAGE_KEYS=["PageUp","PageDown"],ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BACK_KEYS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[Collection,useCollection,createCollectionScope]=function createCollection(name){const PROVIDER_NAME=name+"CollectionProvider",[createCollectionContext,createCollectionScope]=createContextScope(PROVIDER_NAME),[CollectionProviderImpl,useCollectionContext]=createCollectionContext(PROVIDER_NAME,{collectionRef:{current:null},itemMap:new Map}),CollectionProvider=props=>{const{scope,children}=props,ref=react.useRef(null),itemMap=react.useRef(new Map).current;return(0,jsx_runtime.jsx)(CollectionProviderImpl,{scope,itemMap,collectionRef:ref,children})};CollectionProvider.displayName=PROVIDER_NAME;const COLLECTION_SLOT_NAME=name+"CollectionSlot",CollectionSlot=react.forwardRef(((props,forwardedRef)=>{const{scope,children}=props,composedRefs=useComposedRefs(forwardedRef,useCollectionContext(COLLECTION_SLOT_NAME,scope).collectionRef);return(0,jsx_runtime.jsx)(Slot,{ref:composedRefs,children})}));CollectionSlot.displayName=COLLECTION_SLOT_NAME;const ITEM_SLOT_NAME=name+"CollectionItemSlot",CollectionItemSlot=react.forwardRef(((props,forwardedRef)=>{const{scope,children,...itemData}=props,ref=react.useRef(null),composedRefs=useComposedRefs(forwardedRef,ref),context=useCollectionContext(ITEM_SLOT_NAME,scope);return react.useEffect((()=>(context.itemMap.set(ref,{ref,...itemData}),()=>{context.itemMap.delete(ref)}))),(0,jsx_runtime.jsx)(Slot,{"data-radix-collection-item":"",ref:composedRefs,children})}));return CollectionItemSlot.displayName=ITEM_SLOT_NAME,[{Provider:CollectionProvider,Slot:CollectionSlot,ItemSlot:CollectionItemSlot},function useCollection(scope){const context=useCollectionContext(name+"CollectionConsumer",scope);return react.useCallback((()=>{const collectionNode=context.collectionRef.current;if(!collectionNode)return[];const orderedNodes=Array.from(collectionNode.querySelectorAll("[data-radix-collection-item]"));return Array.from(context.itemMap.values()).sort(((a,b)=>orderedNodes.indexOf(a.ref.current)-orderedNodes.indexOf(b.ref.current)))}),[context.collectionRef,context.itemMap])},createCollectionScope]}("Slider"),[createSliderContext,createSliderScope]=createContextScope("Slider",[createCollectionScope]),[SliderProvider,useSliderContext]=createSliderContext("Slider"),Slider=react.forwardRef(((props,forwardedRef)=>{const{name,min=0,max=100,step=1,orientation="horizontal",disabled=!1,minStepsBetweenThumbs=0,defaultValue=[min],value,onValueChange=()=>{},onValueCommit=()=>{},inverted=!1,form,...sliderProps}=props,thumbRefs=react.useRef(new Set),valueIndexToChangeRef=react.useRef(0),SliderOrientation="horizontal"===orientation?SliderHorizontal:SliderVertical,[values=[],setValues]=useControllableState({prop:value,defaultProp:defaultValue,onChange:value2=>{const thumbs=[...thumbRefs.current];thumbs[valueIndexToChangeRef.current]?.focus(),onValueChange(value2)}}),valuesBeforeSlideStartRef=react.useRef(values);function updateValues(value2,atIndex,{commit}={commit:!1}){const decimalCount=function getDecimalCount(value){return(String(value).split(".")[1]||"").length}(step),snapToStep=function roundValue(value,decimalCount){const rounder=Math.pow(10,decimalCount);return Math.round(value*rounder)/rounder}(Math.round((value2-min)/step)*step+min,decimalCount),nextValue=clamp(snapToStep,[min,max]);setValues(((prevValues=[])=>{const nextValues=function getNextSortedValues(prevValues=[],nextValue,atIndex){const nextValues=[...prevValues];return nextValues[atIndex]=nextValue,nextValues.sort(((a,b)=>a-b))}(prevValues,nextValue,atIndex);if(function hasMinStepsBetweenValues(values,minStepsBetweenValues){if(minStepsBetweenValues>0){const stepsBetweenValues=function getStepsBetweenValues(values){return values.slice(0,-1).map(((value,index)=>values[index+1]-value))}(values);return Math.min(...stepsBetweenValues)>=minStepsBetweenValues}return!0}(nextValues,minStepsBetweenThumbs*step)){valueIndexToChangeRef.current=nextValues.indexOf(nextValue);const hasChanged=String(nextValues)!==String(prevValues);return hasChanged&&commit&&onValueCommit(nextValues),hasChanged?nextValues:prevValues}return prevValues}))}return(0,jsx_runtime.jsx)(SliderProvider,{scope:props.__scopeSlider,name,disabled,min,max,valueIndexToChangeRef,thumbs:thumbRefs.current,values,orientation,form,children:(0,jsx_runtime.jsx)(Collection.Provider,{scope:props.__scopeSlider,children:(0,jsx_runtime.jsx)(Collection.Slot,{scope:props.__scopeSlider,children:(0,jsx_runtime.jsx)(SliderOrientation,{"aria-disabled":disabled,"data-disabled":disabled?"":void 0,...sliderProps,ref:forwardedRef,onPointerDown:composeEventHandlers(sliderProps.onPointerDown,(()=>{disabled||(valuesBeforeSlideStartRef.current=values)})),min,max,inverted,onSlideStart:disabled?void 0:function handleSlideStart(value2){const closestIndex=function getClosestValueIndex(values,nextValue){if(1===values.length)return 0;const distances=values.map((value=>Math.abs(value-nextValue))),closestDistance=Math.min(...distances);return distances.indexOf(closestDistance)}(values,value2);updateValues(value2,closestIndex)},onSlideMove:disabled?void 0:function handleSlideMove(value2){updateValues(value2,valueIndexToChangeRef.current)},onSlideEnd:disabled?void 0:function handleSlideEnd(){const prevValue=valuesBeforeSlideStartRef.current[valueIndexToChangeRef.current];values[valueIndexToChangeRef.current]!==prevValue&&onValueCommit(values)},onHomeKeyDown:()=>!disabled&&updateValues(min,0,{commit:!0}),onEndKeyDown:()=>!disabled&&updateValues(max,values.length-1,{commit:!0}),onStepKeyDown:({event,direction:stepDirection})=>{if(!disabled){const multiplier=PAGE_KEYS.includes(event.key)||event.shiftKey&&ARROW_KEYS.includes(event.key)?10:1,atIndex=valueIndexToChangeRef.current;updateValues(values[atIndex]+step*multiplier*stepDirection,atIndex,{commit:!0})}}})})})})}));Slider.displayName="Slider";var[SliderOrientationProvider,useSliderOrientationContext]=createSliderContext("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),SliderHorizontal=react.forwardRef(((props,forwardedRef)=>{const{min,max,dir,inverted,onSlideStart,onSlideMove,onSlideEnd,onStepKeyDown,...sliderProps}=props,[slider,setSlider]=react.useState(null),composedRefs=useComposedRefs(forwardedRef,(node=>setSlider(node))),rectRef=react.useRef(void 0),direction=function useDirection(localDir){const globalDir=react.useContext(DirectionContext);return localDir||globalDir||"ltr"}(dir),isDirectionLTR="ltr"===direction,isSlidingFromLeft=isDirectionLTR&&!inverted||!isDirectionLTR&&inverted;function getValueFromPointer(pointerPosition){const rect=rectRef.current||slider.getBoundingClientRect(),value=linearScale([0,rect.width],isSlidingFromLeft?[min,max]:[max,min]);return rectRef.current=rect,value(pointerPosition-rect.left)}return(0,jsx_runtime.jsx)(SliderOrientationProvider,{scope:props.__scopeSlider,startEdge:isSlidingFromLeft?"left":"right",endEdge:isSlidingFromLeft?"right":"left",direction:isSlidingFromLeft?1:-1,size:"width",children:(0,jsx_runtime.jsx)(SliderImpl,{dir:direction,"data-orientation":"horizontal",...sliderProps,ref:composedRefs,style:{...sliderProps.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:event=>{const value=getValueFromPointer(event.clientX);onSlideStart?.(value)},onSlideMove:event=>{const value=getValueFromPointer(event.clientX);onSlideMove?.(value)},onSlideEnd:()=>{rectRef.current=void 0,onSlideEnd?.()},onStepKeyDown:event=>{const isBackKey=BACK_KEYS[isSlidingFromLeft?"from-left":"from-right"].includes(event.key);onStepKeyDown?.({event,direction:isBackKey?-1:1})}})})})),SliderVertical=react.forwardRef(((props,forwardedRef)=>{const{min,max,inverted,onSlideStart,onSlideMove,onSlideEnd,onStepKeyDown,...sliderProps}=props,sliderRef=react.useRef(null),ref=useComposedRefs(forwardedRef,sliderRef),rectRef=react.useRef(void 0),isSlidingFromBottom=!inverted;function getValueFromPointer(pointerPosition){const rect=rectRef.current||sliderRef.current.getBoundingClientRect(),value=linearScale([0,rect.height],isSlidingFromBottom?[max,min]:[min,max]);return rectRef.current=rect,value(pointerPosition-rect.top)}return(0,jsx_runtime.jsx)(SliderOrientationProvider,{scope:props.__scopeSlider,startEdge:isSlidingFromBottom?"bottom":"top",endEdge:isSlidingFromBottom?"top":"bottom",size:"height",direction:isSlidingFromBottom?1:-1,children:(0,jsx_runtime.jsx)(SliderImpl,{"data-orientation":"vertical",...sliderProps,ref,style:{...sliderProps.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:event=>{const value=getValueFromPointer(event.clientY);onSlideStart?.(value)},onSlideMove:event=>{const value=getValueFromPointer(event.clientY);onSlideMove?.(value)},onSlideEnd:()=>{rectRef.current=void 0,onSlideEnd?.()},onStepKeyDown:event=>{const isBackKey=BACK_KEYS[isSlidingFromBottom?"from-bottom":"from-top"].includes(event.key);onStepKeyDown?.({event,direction:isBackKey?-1:1})}})})})),SliderImpl=react.forwardRef(((props,forwardedRef)=>{const{__scopeSlider,onSlideStart,onSlideMove,onSlideEnd,onHomeKeyDown,onEndKeyDown,onStepKeyDown,...sliderProps}=props,context=useSliderContext("Slider",__scopeSlider);return(0,jsx_runtime.jsx)(Primitive.span,{...sliderProps,ref:forwardedRef,onKeyDown:composeEventHandlers(props.onKeyDown,(event=>{"Home"===event.key?(onHomeKeyDown(event),event.preventDefault()):"End"===event.key?(onEndKeyDown(event),event.preventDefault()):PAGE_KEYS.concat(ARROW_KEYS).includes(event.key)&&(onStepKeyDown(event),event.preventDefault())})),onPointerDown:composeEventHandlers(props.onPointerDown,(event=>{const target=event.target;target.setPointerCapture(event.pointerId),event.preventDefault(),context.thumbs.has(target)?target.focus():onSlideStart(event)})),onPointerMove:composeEventHandlers(props.onPointerMove,(event=>{event.target.hasPointerCapture(event.pointerId)&&onSlideMove(event)})),onPointerUp:composeEventHandlers(props.onPointerUp,(event=>{const target=event.target;target.hasPointerCapture(event.pointerId)&&(target.releasePointerCapture(event.pointerId),onSlideEnd(event))}))})})),SliderTrack=react.forwardRef(((props,forwardedRef)=>{const{__scopeSlider,...trackProps}=props,context=useSliderContext("SliderTrack",__scopeSlider);return(0,jsx_runtime.jsx)(Primitive.span,{"data-disabled":context.disabled?"":void 0,"data-orientation":context.orientation,...trackProps,ref:forwardedRef})}));SliderTrack.displayName="SliderTrack";var SliderRange=react.forwardRef(((props,forwardedRef)=>{const{__scopeSlider,...rangeProps}=props,context=useSliderContext("SliderRange",__scopeSlider),orientation=useSliderOrientationContext("SliderRange",__scopeSlider),composedRefs=useComposedRefs(forwardedRef,react.useRef(null)),valuesCount=context.values.length,percentages=context.values.map((value=>convertValueToPercentage(value,context.min,context.max))),offsetStart=valuesCount>1?Math.min(...percentages):0,offsetEnd=100-Math.max(...percentages);return(0,jsx_runtime.jsx)(Primitive.span,{"data-orientation":context.orientation,"data-disabled":context.disabled?"":void 0,...rangeProps,ref:composedRefs,style:{...props.style,[orientation.startEdge]:offsetStart+"%",[orientation.endEdge]:offsetEnd+"%"}})}));SliderRange.displayName="SliderRange";var SliderThumb=react.forwardRef(((props,forwardedRef)=>{const getItems=useCollection(props.__scopeSlider),[thumb,setThumb]=react.useState(null),composedRefs=useComposedRefs(forwardedRef,(node=>setThumb(node))),index=react.useMemo((()=>thumb?getItems().findIndex((item=>item.ref.current===thumb)):-1),[getItems,thumb]);return(0,jsx_runtime.jsx)(SliderThumbImpl,{...props,ref:composedRefs,index})})),SliderThumbImpl=react.forwardRef(((props,forwardedRef)=>{const{__scopeSlider,index,name,...thumbProps}=props,context=useSliderContext("SliderThumb",__scopeSlider),orientation=useSliderOrientationContext("SliderThumb",__scopeSlider),[thumb,setThumb]=react.useState(null),composedRefs=useComposedRefs(forwardedRef,(node=>setThumb(node))),isFormControl=!thumb||(context.form||!!thumb.closest("form")),size=function useSize(element){const[size,setSize]=react.useState(void 0);return useLayoutEffect2((()=>{if(element){setSize({width:element.offsetWidth,height:element.offsetHeight});const resizeObserver=new ResizeObserver((entries=>{if(!Array.isArray(entries))return;if(!entries.length)return;const entry=entries[0];let width,height;if("borderBoxSize"in entry){const borderSizeEntry=entry.borderBoxSize,borderSize=Array.isArray(borderSizeEntry)?borderSizeEntry[0]:borderSizeEntry;width=borderSize.inlineSize,height=borderSize.blockSize}else width=element.offsetWidth,height=element.offsetHeight;setSize({width,height})}));return resizeObserver.observe(element,{box:"border-box"}),()=>resizeObserver.unobserve(element)}setSize(void 0)}),[element]),size}(thumb),value=context.values[index],percent=void 0===value?0:convertValueToPercentage(value,context.min,context.max),label=function getLabel(index,totalValues){return totalValues>2?`Value ${index+1} of ${totalValues}`:2===totalValues?["Minimum","Maximum"][index]:void 0}(index,context.values.length),orientationSize=size?.[orientation.size],thumbInBoundsOffset=orientationSize?function getThumbInBoundsOffset(width,left,direction){const halfWidth=width/2,offset=linearScale([0,50],[0,halfWidth]);return(halfWidth-offset(left)*direction)*direction}(orientationSize,percent,orientation.direction):0;return react.useEffect((()=>{if(thumb)return context.thumbs.add(thumb),()=>{context.thumbs.delete(thumb)}}),[thumb,context.thumbs]),(0,jsx_runtime.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[orientation.startEdge]:`calc(${percent}% + ${thumbInBoundsOffset}px)`},children:[(0,jsx_runtime.jsx)(Collection.ItemSlot,{scope:props.__scopeSlider,children:(0,jsx_runtime.jsx)(Primitive.span,{role:"slider","aria-label":props["aria-label"]||label,"aria-valuemin":context.min,"aria-valuenow":value,"aria-valuemax":context.max,"aria-orientation":context.orientation,"data-orientation":context.orientation,"data-disabled":context.disabled?"":void 0,tabIndex:context.disabled?void 0:0,...thumbProps,ref:composedRefs,style:void 0===value?{display:"none"}:props.style,onFocus:composeEventHandlers(props.onFocus,(()=>{context.valueIndexToChangeRef.current=index}))})}),isFormControl&&(0,jsx_runtime.jsx)(BubbleInput,{name:name??(context.name?context.name+(context.values.length>1?"[]":""):void 0),form:context.form,value},index)]})}));SliderThumb.displayName="SliderThumb";var BubbleInput=props=>{const{value,...inputProps}=props,ref=react.useRef(null),prevValue=function usePrevious(value){const ref=react.useRef({value,previous:value});return react.useMemo((()=>(ref.current.value!==value&&(ref.current.previous=ref.current.value,ref.current.value=value),ref.current.previous)),[value])}(value);return react.useEffect((()=>{const input=ref.current,inputProto=window.HTMLInputElement.prototype,setValue=Object.getOwnPropertyDescriptor(inputProto,"value").set;if(prevValue!==value&&setValue){const event=new Event("input",{bubbles:!0});setValue.call(input,value),input.dispatchEvent(event)}}),[prevValue,value]),(0,jsx_runtime.jsx)("input",{style:{display:"none"},...inputProps,ref,defaultValue:value})};function convertValueToPercentage(value,min,max){return clamp(100/(max-min)*(value-min),[0,100])}function linearScale(input,output){return value=>{if(input[0]===input[1]||output[0]===output[1])return output[0];const ratio=(output[1]-output[0])/(input[1]-input[0]);return output[0]+ratio*(value-input[0])}}var react_slider_dist_Root=Slider,Track=SliderTrack,Range=SliderRange,Thumb=SliderThumb,bpk_react_utils=__webpack_require__("./packages/bpk-react-utils/index.ts");const getClassName=(0,bpk_react_utils.fD)({"bpk-slider":"bpk-slider-NmOrp","bpk-slider__track":"bpk-slider__track-MDgLR","bpk-slider__range":"bpk-slider__range-vQ2EJ","bpk-slider__thumb":"bpk-slider__thumb-fzlyw"}),BpkSlider=_ref=>{let{ariaLabel,ariaValuetext,inputProps,max,min,minDistance,onAfterChange,onChange,step,value,...rest}=_ref;const invert=(0,bpk_react_utils.V8)(),currentValue=Array.isArray(value)?value:[value],processSliderValues=(sliderValues,callback)=>{const val=1===sliderValues.length?sliderValues[0]:sliderValues;callback&&callback(val)},thumbRefs=[(0,react.useRef)(null),(0,react.useRef)(null)];return(0,jsx_runtime.jsxs)(react_slider_dist_Root,{className:getClassName("bpk-slider"),defaultValue:currentValue,min,max,step:step||1,onValueChange:sliderValues=>{processSliderValues(sliderValues,onChange)},onValueCommit:sliderValues=>{processSliderValues(sliderValues,onAfterChange)},inverted:invert,minStepsBetweenThumbs:minDistance,...rest,children:[(0,jsx_runtime.jsx)(Track,{className:getClassName("bpk-slider__track"),children:(0,jsx_runtime.jsx)(Range,{className:getClassName("bpk-slider__range")})}),currentValue.map(((val,index)=>(0,jsx_runtime.jsx)(Thumb,{"aria-label":ariaLabel[index],"aria-valuetext":ariaValuetext?ariaValuetext[index]:val.toString(),className:getClassName("bpk-slider__thumb"),"aria-valuenow":currentValue[index],ref:thumbRefs[index],asChild:!0,children:(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsx)(BpkSlider_BubbleInput,{value:currentValue[index],thumbRef:thumbRefs[index],...inputProps&&inputProps[index]})})},ariaLabel[index])))]})},BpkSlider_BubbleInput=(0,react.forwardRef)(((props,forwardedRef)=>{const{thumbRef,value,...inputProps}=props,ref=(0,react.useRef)(),composedRefs=useComposedRefs(forwardedRef,ref);return(0,react.useEffect)((()=>{const thumb=thumbRef.current,input=ref.current;if(thumb){const interactionEndHandler=event=>{var _touches;if(input&&(event.button>-1||(null===(_touches=event.touches)||void 0===_touches?void 0:_touches.length)>-1||["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(event.key))){const newValue=parseFloat(input.getAttribute("value"));value!==newValue&&(0,bpk_react_utils.ZW)(input,newValue)}},focusInHandler=()=>{const controller=new AbortController;thumb.addEventListener("focusout",(()=>controller.abort()),{once:!0}),document.addEventListener("click",interactionEndHandler,{signal:controller.signal}),thumb.addEventListener("touchend",interactionEndHandler,{signal:controller.signal}),thumb.addEventListener("keyup",interactionEndHandler,{signal:controller.signal})};return thumb.addEventListener("focusin",focusInHandler),()=>{thumb&&thumb.removeEventListener("focusin",focusInHandler)}}return()=>{}}),[thumbRef,ref,value]),(0,jsx_runtime.jsx)("input",{style:{display:"none"},...inputProps,ref:composedRefs,type:"number",defaultValue:value})})),src_BpkSlider=BpkSlider;try{BpkSlider.displayName="BpkSlider",BpkSlider.__docgenInfo={description:"",displayName:"BpkSlider",props:{max:{defaultValue:null,description:"",name:"max",required:!0,type:{name:"number"}},min:{defaultValue:null,description:"",name:"min",required:!0,type:{name:"number"}},minDistance:{defaultValue:null,description:"",name:"minDistance",required:!1,type:{name:"number | undefined"}},step:{defaultValue:null,description:"",name:"step",required:!1,type:{name:"number | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: number | number[]) => void"}},onAfterChange:{defaultValue:null,description:"",name:"onAfterChange",required:!1,type:{name:"((value: number | number[]) => void) | undefined"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"number | number[]"}},ariaLabel:{defaultValue:null,description:"",name:"ariaLabel",required:!0,type:{name:"string[]"}},ariaValuetext:{defaultValue:null,description:"",name:"ariaValuetext",required:!1,type:{name:"string[] | undefined"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!1,type:{name:"[{ [key: string]: any; }] | [{ [key: string]: any; }, { [key: string]: any; }] | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/bpk-component-slider/src/BpkSlider.tsx#BpkSlider"]={docgenInfo:BpkSlider.__docgenInfo,name:"BpkSlider",path:"packages/bpk-component-slider/src/BpkSlider.tsx#BpkSlider"})}catch(__react_docgen_typescript_loader_error){}var prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),bpk_component_rtl_toggle=__webpack_require__("./packages/bpk-component-rtl-toggle/index.ts");const bpk_component_slider=src_BpkSlider;function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class SliderContainer extends react.Component{constructor(props){super(),_defineProperty(this,"handleChange",(value=>{this.setState({value})})),_defineProperty(this,"valueTimeFormatter",(value=>"12:".concat(value.toString().padStart(2,"0"),"pm"))),_defineProperty(this,"valueComponent",((min,max,formatter)=>(0,jsx_runtime.jsxs)("p",{children:[formatter?formatter(min):min," - ",formatter?formatter(max):max]}))),this.state={value:props.value||50}}render(){const min=this.props.min||0,time=!!this.props.time;return(0,jsx_runtime.jsxs)("div",{children:[this.state.value.length?this.valueComponent(this.state.value[0],this.state.value[1],time&&this.valueTimeFormatter):this.valueComponent(min,this.state.value,time&&this.valueTimeFormatter),(0,jsx_runtime.jsx)(bpk_component_slider,{min,max:time?59:100,step:1,onChange:this.handleChange,...this.props,value:this.state.value,ariaLabel:["minimum","maximum"],ariaValuetext:[this.state.value[0],this.state.value[1]],inputProps:[{name:"min"},{name:"max"}]}),(0,jsx_runtime.jsx)("br",{})]})}}SliderContainer.propTypes={time:prop_types_default().bool,min:prop_types_default().number.isRequired,value:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().number),prop_types_default().number]).isRequired},SliderContainer.defaultProps={time:!1};const EnhancedSlider=(0,bpk_component_rtl_toggle.i)(SliderContainer),SimpleSliderExample=()=>(0,jsx_runtime.jsx)(EnhancedSlider,{min:0,value:50}),TimeSliderExample=()=>(0,jsx_runtime.jsx)(EnhancedSlider,{time:!0,min:0,value:50}),SimpleSliderWithStepsExample=()=>(0,jsx_runtime.jsx)(EnhancedSlider,{min:0,value:50,step:10}),RangeSliderExample=()=>(0,jsx_runtime.jsx)(EnhancedSlider,{min:0,value:[20,80]}),RangeSliderWithMinimumDistanceExample=()=>(0,jsx_runtime.jsx)(EnhancedSlider,{min:0,value:[20,80],minDistance:10}),MixedExample=()=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(SimpleSliderExample,{}),(0,jsx_runtime.jsx)(RangeSliderExample,{})]});SimpleSliderExample.__docgenInfo={description:"",methods:[],displayName:"SimpleSliderExample"},TimeSliderExample.__docgenInfo={description:"",methods:[],displayName:"TimeSliderExample"},SimpleSliderWithStepsExample.__docgenInfo={description:"",methods:[],displayName:"SimpleSliderWithStepsExample"},RangeSliderExample.__docgenInfo={description:"",methods:[],displayName:"RangeSliderExample"},RangeSliderWithMinimumDistanceExample.__docgenInfo={description:"",methods:[],displayName:"RangeSliderWithMinimumDistanceExample"},MixedExample.__docgenInfo={description:"",methods:[],displayName:"MixedExample"},SimpleSliderExample.__docgenInfo={description:"",methods:[],displayName:"SimpleSliderExample"},TimeSliderExample.__docgenInfo={description:"",methods:[],displayName:"TimeSliderExample"},SimpleSliderWithStepsExample.__docgenInfo={description:"",methods:[],displayName:"SimpleSliderWithStepsExample"},RangeSliderExample.__docgenInfo={description:"",methods:[],displayName:"RangeSliderExample"},RangeSliderWithMinimumDistanceExample.__docgenInfo={description:"",methods:[],displayName:"RangeSliderWithMinimumDistanceExample"},MixedExample.__docgenInfo={description:"",methods:[],displayName:"MixedExample"};const stories={title:"bpk-component-slider",component:src_BpkSlider,parameters:{docs:{page:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(blocks_dist.hE,{}),(0,jsx_runtime.jsx)(dist.ov,{exclude:["zoomEnabled"]}),(0,jsx_runtime.jsx)(blocks_dist.oz,{children:"\n              **Note**: minDistance and step props are multiplied to calculate the minimum distance allowed between thumbs\n\n            **Note**: The aria props are the values that will be passed to the thumb of the slider. If your slider is for times for instance you would likely pass something like the following to ensure the value of the thumb is read out in a formatted state rather than just the value of where the thumb is on the track. If no `ariaValuetext` is passed to the component the screen reader will read just the value of the thumb\n\n            ariaLabels={['From', 'To']}\n    ariaValuetext={[getSliderTime(finalSliderStart), getSliderTime(finalSliderEnd)]}\n\n          "})]})}}},SimpleSlider=SimpleSliderExample,TimeSlider=TimeSliderExample,SimpleSliderWithSteps=SimpleSliderWithStepsExample,RangeSlider=RangeSliderExample,RangeSliderWithMinimumDistance=RangeSliderWithMinimumDistanceExample,VisualTest=MixedExample,VisualTestWithZoom=VisualTest.bind({});VisualTestWithZoom.args={zoomEnabled:!0}},"./node_modules/prop-types/factoryWithThrowingShims.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var ReactPropTypesSecret=__webpack_require__("./node_modules/prop-types/lib/ReactPropTypesSecret.js");function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}},"./node_modules/prop-types/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/prop-types/factoryWithThrowingShims.js")()},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":module=>{"use strict";module.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}]);