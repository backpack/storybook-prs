(self.webpackChunkbackpack=self.webpackChunkbackpack||[]).push([[6373],{"./examples/bpk-scrim-utils/stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Example:()=>Example,ExampleWithCustomRenderTarget:()=>ExampleWithCustomRenderTarget,default:()=>stories});var examples_namespaceObject={};__webpack_require__.r(examples_namespaceObject),__webpack_require__.d(examples_namespaceObject,{"bpk-scrim-utils-example__dialog":()=>_1,"bpk-scrim-utils-example__dialog-container":()=>_2,"bpk-scrim-utils-example__dialog-content":()=>_3});var dist=__webpack_require__("./node_modules/@storybook/addon-docs/dist/index.mjs"),blocks_dist=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs"),BpkScrim=__webpack_require__("./packages/bpk-scrim-utils/src/BpkScrim.tsx"),bpk_component_button=__webpack_require__("./packages/bpk-component-button/index.ts"),bpk_react_utils=__webpack_require__("./packages/bpk-react-utils/index.ts"),bpk_scrim_utils=__webpack_require__("./packages/bpk-scrim-utils/index.ts"),_1="bpk-scrim-utils-example__dialog-OeZDD",_2="bpk-scrim-utils-example__dialog-container-FGf7E",_3="bpk-scrim-utils-example__dialog-content-e5qqR",jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const getClassName=(0,bpk_react_utils.fD)(examples_namespaceObject),DialogContentWithScrim=(0,bpk_scrim_utils.BJ)((()=>(0,jsx_runtime.jsx)("section",{tabIndex:-1,role:"dialog",className:getClassName("bpk-scrim-utils-example__dialog"),children:(0,jsx_runtime.jsxs)("div",{className:getClassName("bpk-scrim-utils-example__dialog-content"),children:[(0,jsx_runtime.jsx)("div",{children:"Dialog content here."}),(0,jsx_runtime.jsx)(bpk_component_button.Q1,{children:"Some button"})]})}))),withScrimMock=props=>(0,jsx_runtime.jsx)("div",{}),withScrimmedPortalMock=props=>(0,jsx_runtime.jsx)("div",{});try{withScrimMock.displayName="withScrimMock",withScrimMock.__docgenInfo={description:"",displayName:"withScrimMock",props:{getApplicationElement:{defaultValue:null,description:'The `pagewrap` element id is a convention we use internally at Skyscanner. In most cases it should "just work".',name:"getApplicationElement",required:!0,type:{name:"() => HTMLElement | null"}},onClose:{defaultValue:null,description:"This is required unless `closeOnScrimClick` is false. It should be set as the `onClick` action on a button or a link.",name:"onClose",required:!1,type:{name:"(() => void | null) | undefined"}},isIphone:{defaultValue:null,description:"Can be used to apply iPhone only styles or behaviour, as it has different scrolling behaviour",name:"isIphone",required:!1,type:{name:"boolean | undefined"}},isIpad:{defaultValue:null,description:"",name:"isIpad",required:!1,type:{name:"boolean | undefined"}},containerClassName:{defaultValue:null,description:"It can be used to apply styles to the full-screen container into which the enriched component is inserted (e.g. `display: flex` or `display: grid`)",name:"containerClassName",required:!1,type:{name:"string | undefined"}},closeOnScrimClick:{defaultValue:null,description:"",name:"closeOnScrimClick",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/bpk-scrim-utils/stories.utils.tsx#withScrimMock"]={docgenInfo:withScrimMock.__docgenInfo,name:"withScrimMock",path:"examples/bpk-scrim-utils/stories.utils.tsx#withScrimMock"})}catch(__react_docgen_typescript_loader_error){}try{withScrimmedPortalMock.displayName="withScrimmedPortalMock",withScrimmedPortalMock.__docgenInfo={description:"",displayName:"withScrimmedPortalMock",props:{getApplicationElement:{defaultValue:null,description:'The `pagewrap` element id is a convention we use internally at Skyscanner. In most cases it should "just work".',name:"getApplicationElement",required:!0,type:{name:"() => HTMLElement | null"}},onClose:{defaultValue:null,description:"This is required unless `closeOnScrimClick` is false. It should be set as the `onClick` action on a button or a link.",name:"onClose",required:!1,type:{name:"(() => void | null) | undefined"}},isIphone:{defaultValue:null,description:"Can be used to apply iPhone only styles or behaviour, as it has different scrolling behaviour",name:"isIphone",required:!1,type:{name:"boolean | undefined"}},isIpad:{defaultValue:null,description:"",name:"isIpad",required:!1,type:{name:"boolean | undefined"}},containerClassName:{defaultValue:null,description:"It can be used to apply styles to the full-screen container into which the enriched component is inserted (e.g. `display: flex` or `display: grid`)",name:"containerClassName",required:!1,type:{name:"string | undefined"}},closeOnScrimClick:{defaultValue:null,description:"",name:"closeOnScrimClick",required:!1,type:{name:"boolean | undefined"}},renderTarget:{defaultValue:null,description:"",name:"renderTarget",required:!1,type:{name:"(() => HTMLElement | null) | null | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/bpk-scrim-utils/stories.utils.tsx#withScrimmedPortalMock"]={docgenInfo:withScrimmedPortalMock.__docgenInfo,name:"withScrimmedPortalMock",path:"examples/bpk-scrim-utils/stories.utils.tsx#withScrimmedPortalMock"})}catch(__react_docgen_typescript_loader_error){}const stories={title:"bpk-scrim-utils",component:BpkScrim.A,subcomponents:{withScrimMock,withScrimmedPortalMock},parameters:{docs:{page:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(blocks_dist.hE,{}),(0,jsx_runtime.jsx)(dist.ov,{exclude:["zoomEnabled"]}),(0,jsx_runtime.jsx)(blocks_dist.oz,{children:"`withScrim` sends all props it receives down to the component, except `getApplicationElement` and `padded`. It also adds some props that are used for a11y and closing the modal:\n          `dialogRef` should be set as the ref on the visible container on top of the scrim; it is used to set focus, `onClose` , `isIphone`"})]})}}},Example=()=>(0,jsx_runtime.jsxs)("div",{id:"pagewrap",children:[(0,jsx_runtime.jsx)("div",{children:"This element should be hidden from AT by the scrim. It should also not be possible to tab to it."}),(0,jsx_runtime.jsx)(DialogContentWithScrim,{getApplicationElement:()=>document.getElementById("pagewrap"),closeOnScrimClick:!1,containerClassName:getClassName("bpk-scrim-utils-example__dialog-container")})]}),ExampleWithCustomRenderTarget=()=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{id:"portalElement",children:"Dialog attached here."}),(0,jsx_runtime.jsxs)("div",{id:"pagewrap",children:[(0,jsx_runtime.jsx)("div",{children:"This element should be hidden from AT by the scrim. It should also not be possible to tab to it."}),(0,jsx_runtime.jsx)(DialogContentWithScrim,{getApplicationElement:()=>document.getElementById("pagewrap"),closeOnScrimClick:!1,containerClassName:getClassName("bpk-scrim-utils-example__dialog-container"),renderTarget:()=>document.getElementById("portalElement")})]})]})},"./packages/bpk-scrim-utils/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{fl:()=>src_withScrim,BJ:()=>src_withScrimmedPortal});var bpk_scrim_content_module_namespaceObject={};__webpack_require__.r(bpk_scrim_content_module_namespaceObject),__webpack_require__.d(bpk_scrim_content_module_namespaceObject,{"bpk-scrim-content":()=>_1});var react=__webpack_require__("./node_modules/react/index.js"),a11y_focus_scope=__webpack_require__("./packages/node_modules/a11y-focus-scope/index.js"),a11y_focus_store=__webpack_require__("./packages/node_modules/a11y-focus-store/index.js"),bpk_react_utils=__webpack_require__("./packages/bpk-react-utils/index.ts"),BpkScrim=__webpack_require__("./packages/bpk-scrim-utils/src/BpkScrim.tsx");let scrollOffset=0;const getWindow=()=>"undefined"!=typeof window?window:null,getBodyElement=()=>"undefined"!=typeof document&&void 0!==document.body?document.body:null,restoreScroll=()=>{const window=getWindow();window&&window.scrollTo(0,scrollOffset)},lockScroll=()=>{const body=getBodyElement();if(!body)return;const paddingRight=(()=>{let scrollBarWidth=0;const window=getWindow(),body=getBodyElement();if(null===body||null===window)return"";if(body.clientWidth<window.innerWidth){const scrollDiv=document.createElement("div");scrollDiv.style.position="absolute",scrollDiv.style.top="-9999px",scrollDiv.style.width="50px",scrollDiv.style.height="50px",scrollDiv.style.overflow="scroll",body.appendChild(scrollDiv),scrollBarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth,body.removeChild(scrollDiv)}return 0===scrollBarWidth?"":"".concat(scrollBarWidth,"px")})();body.style.overflow="hidden",body.style.paddingRight=paddingRight};var _1="bpk-scrim-content-dkxOY",jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const getClassName=(0,bpk_react_utils.fD)(bpk_scrim_content_module_namespaceObject),withScrim=WrappedComponent=>{class WithScrim extends react.Component{constructor(){super(...arguments),_defineProperty(this,"dialogRef",(ref=>{this.dialogElement=ref}))}componentDidMount(){const{getApplicationElement,isIpad,isIphone}=this.props,applicationElement=getApplicationElement();requestAnimationFrame((()=>{(isIphone||isIpad)&&((()=>{const window=getWindow();window&&(scrollOffset=window.pageYOffset)})(),(()=>{const body=getBodyElement();body&&(body.style.position="fixed")})()),lockScroll()})),applicationElement&&applicationElement.setAttribute("aria-hidden","true"),a11y_focus_store.storeFocus(),this.dialogElement&&a11y_focus_scope.scopeFocus(this.dialogElement)}componentWillUnmount(){const{getApplicationElement,isIpad,isIphone}=this.props,applicationElement=getApplicationElement();(isIphone||isIpad)&&(setTimeout(restoreScroll,0),(()=>{const body=getBodyElement();body&&(body.style.position="")})()),(()=>{const body=getBodyElement();body&&(body.style.overflow="",body.style.paddingRight="")})(),applicationElement&&applicationElement.removeAttribute("aria-hidden"),a11y_focus_scope.unscopeFocus(),a11y_focus_store.restoreFocus()}render(){const{closeOnScrimClick,containerClassName,getApplicationElement,isIpad,isIphone,onClose,...rest}=this.props,classNames=[getClassName("bpk-scrim-content")];return containerClassName&&classNames.push(containerClassName),(0,jsx_runtime.jsxs)("div",{className:classNames.join(" "),children:[(0,jsx_runtime.jsx)(BpkScrim.A,{onClose:closeOnScrimClick?onClose:void 0}),(0,jsx_runtime.jsx)(WrappedComponent,{...rest,isIphone,isIpad,dialogRef:this.dialogRef,onClose})]})}}return _defineProperty(WithScrim,"defaultProps",{onClose:null,isIphone:(0,bpk_react_utils.iB)(),isIpad:(0,bpk_react_utils.$u)(),containerClassName:null,closeOnScrimClick:!0}),WithScrim.displayName=(0,bpk_react_utils.GB)(WrappedComponent,"withScrim"),WithScrim},src_withScrim=withScrim;try{withScrim.displayName="withScrim",withScrim.__docgenInfo={description:"",displayName:"withScrim",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/bpk-scrim-utils/src/withScrim.tsx#withScrim"]={docgenInfo:withScrim.__docgenInfo,name:"withScrim",path:"packages/bpk-scrim-utils/src/withScrim.tsx#withScrim"})}catch(__react_docgen_typescript_loader_error){}var react_dom=__webpack_require__("./node_modules/react-dom/index.js");const withScrimmedPortal=WrappedComponent=>{const Scrimmed=src_withScrim(WrappedComponent);return _ref=>{let{renderTarget,...rest}=_ref;const[isPortalReady,setIsPortalReady]=(0,react.useState)(!1);if((0,react.useEffect)((()=>{setIsPortalReady(!0)}),[]),isPortalReady){const portalElement=(target=>{const portalElement=target&&"function"==typeof target?target():null;if(portalElement)return portalElement;if(document.body)return document.body;throw new Error("Render target and fallback unavailable.")})(renderTarget);return(0,react_dom.createPortal)((0,jsx_runtime.jsx)(Scrimmed,{...rest,isPortalReady}),portalElement)}return(0,jsx_runtime.jsx)(BpkScrim.A,{})}},src_withScrimmedPortal=withScrimmedPortal;try{withScrimmedPortal.displayName="withScrimmedPortal",withScrimmedPortal.__docgenInfo={description:"",displayName:"withScrimmedPortal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/bpk-scrim-utils/src/withScrimmedPortal.tsx#withScrimmedPortal"]={docgenInfo:withScrimmedPortal.__docgenInfo,name:"withScrimmedPortal",path:"packages/bpk-scrim-utils/src/withScrimmedPortal.tsx#withScrimmedPortal"})}catch(__react_docgen_typescript_loader_error){}},"./packages/bpk-scrim-utils/src/BpkScrim.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>src_BpkScrim});var bpk_scrim_module_namespaceObject={};__webpack_require__.r(bpk_scrim_module_namespaceObject),__webpack_require__.d(bpk_scrim_module_namespaceObject,{"bpk-scrim":()=>_1,"bpk-scrim--appear":()=>_2,"bpk-scrim--appear-active":()=>_3,"bpk-scrim--full-screen":()=>_4});var bpk_react_utils=__webpack_require__("./packages/bpk-react-utils/index.ts"),_1="bpk-scrim-Z7bNs",_2="bpk-scrim--appear-BlIcw",_3="bpk-scrim--appear-active-ACfwf",_4="bpk-scrim--full-screen-ZXFax",jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const getClassName=(0,bpk_react_utils.fD)(bpk_scrim_module_namespaceObject),BpkScrim=_ref=>{let{onClose=()=>{}}=_ref;return(0,jsx_runtime.jsx)(bpk_react_utils.nW,{appearClassName:getClassName("bpk-scrim--appear"),appearActiveClassName:getClassName("bpk-scrim--appear-active"),transitionTimeout:200,children:(0,jsx_runtime.jsx)("div",{role:"presentation",className:getClassName("bpk-scrim"),onMouseDown:onClose,onTouchStart:onClose})})},src_BpkScrim=BpkScrim;try{BpkScrim.displayName="BpkScrim",BpkScrim.__docgenInfo={description:"",displayName:"BpkScrim",props:{onClose:{defaultValue:{value:"() => {}"},description:"",name:"onClose",required:!1,type:{name:"((e?: SyntheticEvent<Element, Event> | undefined) => void | null) | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/bpk-scrim-utils/src/BpkScrim.tsx#BpkScrim"]={docgenInfo:BpkScrim.__docgenInfo,name:"BpkScrim",path:"packages/bpk-scrim-utils/src/BpkScrim.tsx#BpkScrim"})}catch(__react_docgen_typescript_loader_error){}},"./packages/node_modules/a11y-focus-scope/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var teardownFn,tabbable=__webpack_require__("./packages/node_modules/tabbable/index.js"),focusin=__webpack_require__("./packages/node_modules/focusin/focusin.js"),polyfilled=!1;exports.scopeFocus=function(element){teardownFn&&teardownFn(),teardownFn=function init(element){function focus(){(tabbable(element)[0]||element).focus()}function onFocusIn(event){element===event.target||element.contains(event.target)||focus()}return polyfilled||(focusin.polyfill(),polyfilled=!0),focus(),document.addEventListener("focusin",onFocusIn),function teardown(){document.removeEventListener("focusin",onFocusIn)}}(element)},exports.unscopeFocus=function(){teardownFn&&teardownFn(),teardownFn=null}},"./packages/node_modules/a11y-focus-store/index.js":(__unused_webpack_module,exports)=>{"use strict";var storedFocusElement;exports.storeFocus=function(){storedFocusElement=document.activeElement},exports.clearStoredFocus=function(){storedFocusElement=null},exports.restoreFocus=function(){if(storedFocusElement){try{storedFocusElement.focus()}catch(err){}storedFocusElement=null}}},"./packages/node_modules/focusin/focusin.js":module=>{module.exports={polyfill:function polyfill(){var w=window,d=w.document;function addPolyfill(e){var type="focus"===e.type?"focusin":"focusout",event=new window.CustomEvent(type,{bubbles:!0,cancelable:!1});event.c1Generated=!0,e.target.dispatchEvent(event)}function removePolyfill(e){e.c1Generated||(d.removeEventListener("focus",addPolyfill,!0),d.removeEventListener("blur",addPolyfill,!0),d.removeEventListener("focusin",removePolyfill,!0),d.removeEventListener("focusout",removePolyfill,!0)),setTimeout((function(){d.removeEventListener("focusin",removePolyfill,!0),d.removeEventListener("focusout",removePolyfill,!0)}))}void 0===w.onfocusin&&(d.addEventListener("focus",addPolyfill,!0),d.addEventListener("blur",addPolyfill,!0),d.addEventListener("focusin",removePolyfill,!0),d.addEventListener("focusout",removePolyfill,!0))}}},"./packages/node_modules/tabbable/index.js":module=>{module.exports=function(el,options){options=options||{};var candidate,candidateIndexAttr,candidateIndex,elementDocument=el.ownerDocument||el,basicTabbables=[],orderedTabbables=[],isUnavailable=function createIsUnavailable(elementDocument){var isOffCache=[];function isOff(node,nodeComputedStyle){if(node===elementDocument.documentElement)return!1;for(var i=0,length=isOffCache.length;i<length;i++)if(isOffCache[i][0]===node)return isOffCache[i][1];var result=!1;return"none"===(nodeComputedStyle=nodeComputedStyle||elementDocument.defaultView.getComputedStyle(node)).display?result=!0:node.parentNode&&(result=isOff(node.parentNode)),isOffCache.push([node,result]),result}return function isUnavailable(node){if(node===elementDocument.documentElement)return!1;var computedStyle=elementDocument.defaultView.getComputedStyle(node);return!!isOff(node,computedStyle)||"hidden"===computedStyle.visibility}}(elementDocument),candidateSelectors=["input","select","a[href]","textarea","button","[tabindex]"],candidates=el.querySelectorAll(candidateSelectors.join(","));if(options.includeContainer){var matches=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;candidateSelectors.some((function(candidateSelector){return matches.call(el,candidateSelector)}))&&(candidates=Array.prototype.slice.apply(candidates)).unshift(el)}for(var i=0,l=candidates.length;i<l;i++)candidate=candidates[i],candidateIndexAttr=parseInt(candidate.getAttribute("tabindex"),10),(candidateIndex=isNaN(candidateIndexAttr)?candidate.tabIndex:candidateIndexAttr)<0||"INPUT"===candidate.tagName&&"hidden"===candidate.type||candidate.disabled||isUnavailable(candidate,elementDocument)||(0===candidateIndex?basicTabbables.push(candidate):orderedTabbables.push({index:i,tabIndex:candidateIndex,node:candidate}));var tabbableNodes=orderedTabbables.sort((function(a,b){return a.tabIndex===b.tabIndex?a.index-b.index:a.tabIndex-b.tabIndex})).map((function(a){return a.node}));return Array.prototype.push.apply(tabbableNodes,basicTabbables),tabbableNodes}}}]);